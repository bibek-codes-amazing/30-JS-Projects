<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@500&display=swap"
      rel="stylesheet"
    />

    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0"
    />

    <title>Product Card</title>
    <link rel="stylesheet" href="product.css" />
  </head>
  <body>
    <div class="container">
      <div class="product">
        <div class="gallery">
          <img src="image1.png" id="productImg" />
          <div class="controls">
            <span class="btn active"></span>
            <span class="btn"></span>
            <span class="btn"></span>
          </div>
        </div>
        <div class="details">
          <h1 id="casual">Casual T Shirt</h1>
          <h2 id="price">$29.99</h2>
          <h3 id="discount">15% OFF</h3>
          <p>
            A casual T-shirt that is comfortable, stylish, and versatile.
            Perfect for any occasion.
          </p>
          <form>
            <div class="size-select">
              <p>Size</p>
              <label for="small">
                <input type="radio" name="size" id="small" /><span>S</span>
              </label>
              <label for="medium">
                <input type="radio" name="size" id="medium" /><span>M</span>
              </label>
              <label for="large">
                <input type="radio" name="size" id="large" /><span>L</span>
              </label>
              <label for="x-large">
                <input type="radio" name="size" id="x-large" /><span>XL</span>
              </label>
              <label for="xx-large">
                <input type="radio" name="size" id="xx-large" /><span>XXL</span>
              </label>
            </div>
            <div class="color-select">
              <p>Color</p>
              <label for="red">
                <input type="radio" name="color" id="red" class="" /><span
                  class="color-1 color-btn"
                ></span>
              </label>
              <label for="green">
                <input type="radio" name="color" id="green" class="" /><span
                  class="color-2 color-btn"
                ></span>
              </label>
              <label for="blue">
                <input type="radio" name="color" id="blue" class="" /><span
                  class="color-3 color-btn"
                ></span>
              </label>
              <label for="pink">
                <input type="radio" name="color" id="pink" class="" /><span
                  class="color-4 color-btn"
                ></span>
              </label>
            </div>

            <div class="quantity-select">
              <p>Quantity</p>
              <input type="number" value="1" min="1"/>
            </div>
            <div class="price-discount">
              <p>Final Price</p>
              <span class="price-discount finalPrice">$00.00</span>
            </div>

            <button id="buy">Buy Now</button>
          </form>
        </div>
      </div>
    </div>

    <script>
      let productImg = document.getElementById("productImg");
      let btn = document.getElementsByClassName("btn");

      btn[0].onclick = function () {
        productImg.src = "image1.png";
        for (bt of btn) {
          bt.classList.remove("active");
        }
        this.classList.add("active");
      };
      btn[1].onclick = function () {
        productImg.src = "image2.png";
        for (bt of btn) {
          bt.classList.remove("active");
        }
        this.classList.add("active");
      };
      btn[2].onclick = function () {
        productImg.src = "image3.png";
        for (bt of btn) {
          bt.classList.remove("active");
        }
        this.classList.add("active");
      };

      let titleColor = document.getElementById("casual");
      let buyColor = document.getElementById("buy");
      let colorbtn = document.getElementsByClassName("color-btn");

      colorbtn[0].onclick = function () {
        titleColor.style.color = "red";
        buyColor.style.backgroundColor = "red";
      };
      colorbtn[1].onclick = function () {
        titleColor.style.color = "green";
        buyColor.style.backgroundColor = "green";
      };
      colorbtn[2].onclick = function () {
        titleColor.style.color = "blue";
        buyColor.style.backgroundColor = "blue";
      };
      colorbtn[3].onclick = function () {
        titleColor.style.color = "rgb(247, 0, 255)";
        buyColor.style.backgroundColor = "rgb(247, 0, 255)";
      };

    document.addEventListener("DOMContentLoaded", function () {
  let priceElement = document.getElementById("price");
  let discountElement = document.getElementById("discount");
  let quantityInput = document.querySelector('.quantity-select input');
  let finalPriceSpan = document.querySelector(".finalPrice");

  // Check if elements are found
  if (!priceElement || !discountElement || !quantityInput || !finalPriceSpan) {
    console.error('Could not find required elements.');
    return;
  }

  // Function to calculate and update final price
  function updateFinalPrice() {
    let price = parseFloat(priceElement.textContent.replace('$', ''));
    let discount = parseFloat(discountElement.textContent.replace('% OFF', ''));
    let quantity = parseInt(quantityInput.value);

    // Check if numeric values are valid
    if (isNaN(price) || isNaN(discount) || isNaN(quantity)) {
      console.error('Invalid numeric values.');
      return;
    }

    let finalPriceValue = (price - (price * discount) / 100) * quantity;
    finalPriceValue = finalPriceValue.toFixed(2); // Round to 2 decimal places

    // Update the content of the span element
    finalPriceSpan.textContent = "$" + finalPriceValue;
  }

  // Initial call to update the final price
  updateFinalPrice();

  // Event listener for the quantity input
  quantityInput.addEventListener('input', updateFinalPrice);
});

    </script>
  </body>
</html>
